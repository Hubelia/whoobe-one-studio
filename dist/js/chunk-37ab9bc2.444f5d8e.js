(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37ab9bc2"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"517d":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{key:t.galleryID,staticClass:"pages-gallery bg-white w-screen overflow-hidden max-h-screen h-screen mt-0 inset-0"},[i("div",{staticClass:"py-1 mt-8 bg-white shadow w-screen z-modal hidden md:flex md:flex-row items-center"},[t.dbMode?i("div",{staticClass:"flex items-center"},[i("i-icon",{staticClass:"icon-button border cursor-pointer text-2xl",class:t.dbMode?"bg-purple-500 hover:text-white":"",attrs:{icon:"mdi:widgets-outline",title:"Library"},on:{click:function(e){return t.getPages()}}}),i("m-icon",{attrs:{icon:"download",css:"border icon-button cursor-pointer text-2xl",title:"Import templates DB"},on:{click:function(e){return t.importDB()}}}),i("m-icon",{attrs:{icon:"health_and_safety",css:"border icon-button cursor-pointer text-2xl",title:"Backup templates"},on:{click:function(e){return t.$saveDB()}}}),i("div",{staticClass:"border-r h-10 w-1"})],1):t._e(),t.dbMode?t._e():i("div",{staticClass:"flex items-center pl-2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.desktop.library,expression:"$store.state.desktop.library"}],staticClass:"mr-2 rounded ring-1 ring-purple-500 bg-gray-200 py-2",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.$store.state.desktop,"library",e.target.multiple?i:i[0])},function(e){return t.setCurrentUIKit()}]}},t._l(t.$store.state.desktop.uikits,(function(e){return i("option",{domProps:{value:e}},[t._v(t._s(e.name))])})),0),i("i-icon",{staticClass:"icon-button border cursor-pointer text-2xl",attrs:{icon:"bx:bx-import",title:"Upload UI Kit"},on:{click:function(e){return t.$dialogBus("importUIKit")}}}),t.$store.state.desktop.library?i("i-icon",{staticClass:"icon-button border cursor-pointer text-2xl",attrs:{icon:"bx:bx-export",title:"Export UI Kit"},on:{click:function(e){return t.$exportCustomLibrary()}}}):t._e(),i("m-icon",{attrs:{icon:"add",css:"icon-button cursor-pointer text-2xl border",title:"Create a new UI Kit"},on:{click:function(e){return t.$dialogBus("createUIKit")}}}),i("div",{staticClass:"border-l h-10 w-1"})],1),i("button",{staticClass:"btn btn-blue border-0 rounded",attrs:{title:"Create a new template"},on:{click:function(e){return t.$dialogBus("startEmpty")}}},[t._v("New Template")]),i("div",{staticClass:"border-r h-10 w-1"}),t.isUIKit?t._e():i("div",{staticClass:"absolute right-0 mr-12 flex items-center"},[i("label",[t._v("Category")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],staticClass:"capitalize bg-white rounded",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.category=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"",selected:""}},[t._v("All")]),t._l(t.categories,(function(e){return i("option",{staticClass:"px-1 py-1",domProps:{value:e}},[t._v(t._s(e))])}))],2),i("label",[t._v("Search")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"mr-2",attrs:{type:"text"},domProps:{value:t.search},on:{keydown:function(e){return t.searchPages(e)},input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "+t._s(t.skip+1)+" - "+t._s(t.limit+t.skip<t.total?t.limit+t.skip:t.total)+" of "+t._s(t.total)+" ")])]),i("transition",{attrs:{name:"fade"}},[i("div",{staticClass:"absolute inset-0 mt-20 pb-24 min-h-screen flex flex-row flex-wrap px-6 items-center justify-center cursor-pointer overflow-y-auto max-h-screen z-highest transition-all duration-500"},[t._l(t.pages,(function(e,s){return[i("div",{key:s+t.skip,staticClass:"relative shadow mx-6 my-4 rounded border-t-8 border-gray-500",attrs:{title:e.name}},[i("div",{staticClass:"flex flex-col items-center justify-center w-80 h-80",attrs:{title:e.name}},[e.image?i("img",{staticClass:"w-full",class:t.getImageInfo(e.image),attrs:{src:t.imagePage(e)}}):t._e()]),i("div",{staticClass:"w-full absolute bottom-0 p-1 bg-gray-200 text-black mt-1"},[t._v(t._s(e.name))]),i("div",{staticClass:"absolute inset-0 opacity-0 bg-white hover:bg-opacity-50 hover:opacity-100 flex flex-row items-center justify-around"},[i("button",{staticClass:"btn btn-purple hover:bg-purple-300 rounded border-0 w-24",on:{click:function(i){t.openPage(e),t.$dialogBus("closeDialog")}}},[t._v("Edit")]),i("button",{staticClass:"btn btn-purple hover:bg-purple-300 rounded border-0 w-24",on:{click:function(i){return t.previewPage(e)}}},[t._v("Preview")])])])]})),i("m-icon",{staticClass:"fixed mt-8 top-1/2 left-0 text-6xl",attrs:{icon:"chevron_left"},on:{click:function(e){t.skip>0&&(t.skip=t.skip-t.limit)}}}),i("m-icon",{staticClass:"fixed mt-8 top-1/2 right-0 text-6xl",attrs:{icon:"chevron_right"},on:{click:function(e){t.skip+t.limit<t.total&&(t.skip=t.skip+t.limit)}}})],2)])],1)},r=[],o=i("2909"),a=(i("4e82"),i("4de4"),i("caad"),i("2532"),i("b0c0"),i("ac1f"),i("841c"),i("56d7")),n={name:"PagesGallery",data:function(){return{limit:10,skip:0,search:"",dataset:null,pages:null,total:0,preview:null,currentImage:null,category:"",filter:!1,kit:!1,galleryID:null}},computed:{categories:function(){return this.$store.state.editor.settings.categories.sort()},dbMode:function(){return this.$store.state.desktop.dbmode}},watch:{category:function(t){var e=this;this.dbMode&&(this.$store.dispatch("galleryFilter",t),this.skip=0,this.$getPages(this.category.toLowerCase(),this.limit,this.skip).then((function(t){e.pages=t})))},skip:function(t){var e=this;this.dbMode&&this.$getPages(this.category.toLowerCase(),this.limit,this.skip).then((function(t){e.pages=t}))},"$store.state.desktop.library":function(t){this.galleryID=this.$randomID(),this.importUIKit()},dbMode:function(t){t||(this.pages=this.$store.state.desktop.library.templates,this.filter=!1)}},methods:{isUIKit:function(){return this.$store.state.desktop.library&&(this.kit=this.$store.state.desktop.library),"UI Kit"===this.$store.state.desktop.tabs[this.$store.state.desktop.currentTab].label},setCurrentUIKit:function(){this.pages=this.$store.state.editor.library.templates},getImageInfo:function(t){var e=this.$imageInfo(t),i=e.naturalWidth/e.naturalHeight;return i<1?"object-cover object-top h-60":i>2?"h-20 object-contain":"h-80 object-contain"},imagePage:function(t){return t.image?t.image:"no-image.png"},openPage:function(t){if(this.$route.fullPath.includes("mode")){if(!this.$store.state.editor.current)return void this.$eventBus("notification","You need to select a block in order to import a new one","error");var e=t.json.blocks;this.$store.state.editor.current.blocks.push(e)}else this.$store.dispatch("setPage",t),this.$store.dispatch("document",t.json.blocks);this.$store.dispatch("add_tab",{label:t.name,object:t,type:"editor"})},previewPage:function(t){this.$store.dispatch("setPage",t),this.$store.dispatch("document",t.json.blocks),window.localStorage.setItem("whoobe-preview",JSON.stringify(t)),this.$dialogBus("pagePreview","fullscreen")},getPages:function(){var t=this;this.dbMode=!0,this.$getPages(this.category,this.limit,this.skip).then((function(e){t.pages=e}))},searchPages:function(t){var e=this;13===t.keyCode&&(this.search?this.$searchPages(this.search).then((function(t){e.pages=t,e.total=e.pages.length,e.filter=!0})):(this.skip=0,this.filter=!1,this.getPages()),this.kit=!1)},importUIKit:function(){var t=this.$store.state.desktop.library;this.pages=Object(o["a"])(t.templates),this.total=t.templates.length,this.filter=!1,this.kit=this.$store.state.desktop.library,this.dbMode=!1},importDB:function(){var t=window.confirm("Importing will be overwrite the current database. Continue?");t&&a["dialogBus"].$emit("importDatabase","common/ImportDatabase.vue")}},mounted:function(){var t=this;this.$dbCount().then((function(e){t.total=e})),this.$store.state.desktop.galleryFilter&&(this.category=this.$store.state.desktop.galleryFilter),this.dbMode?this.$getPages(this.category,this.limit,this.skip).then((function(e){t.pages=e})):this.$store.state.desktop.library&&this.$store.state.desktop.library.templates.length?this.pages=this.$store.state.desktop.library.templates:this.$dialogBus("createUIKit"),this.galleryID=this.$randomID()}},l=n,c=i("2877"),u=Object(c["a"])(l,s,r,!1,null,null,null);e["default"]=u.exports},"841c":function(t,e,i){"use strict";var s=i("d784"),r=i("825a"),o=i("1d80"),a=i("129f"),n=i("577e"),l=i("14c3");s("search",(function(t,e,i){return[function(e){var i=o(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,i):new RegExp(e)[t](n(i))},function(t){var s=r(this),o=n(t),c=i(e,s,o);if(c.done)return c.value;var u=s.lastIndex;a(u,0)||(s.lastIndex=0);var d=l(s,o);return a(s.lastIndex,u)||(s.lastIndex=u),null===d?-1:d.index}]}))}}]);