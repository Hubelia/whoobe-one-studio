(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a9d8102"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"841c":function(t,e,i){"use strict";var s=i("d784"),a=i("825a"),n=i("1d80"),r=i("129f"),o=i("577e"),l=i("14c3");s("search",(function(t,e,i){return[function(e){var i=n(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,i):new RegExp(e)[t](o(i))},function(t){var s=a(this),n=o(t),c=i(e,s,n);if(c.done)return c.value;var u=s.lastIndex;r(u,0)||(s.lastIndex=0);var h=l(s,n);return r(s.lastIndex,u)||(s.lastIndex=u),null===h?-1:h.index}]}))},f120:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{key:t.galleryID,staticClass:"pages-gallery bg-white w-screen overflow-hidden max-h-screen h-screen mt-0 inset-0"},[i("div",{staticClass:"py-1 mt-8 bg-white shadow w-screen z-modal hidden md:flex md:flex-row items-center"},[i("div",{staticClass:"flex items-center"},[i("i-icon",{staticClass:"bg-purple-500 text-white icon-button border cursor-pointer text-2xl",attrs:{icon:"la:elementor",title:"Library"},on:{click:function(e){return t.getPages()}}}),i("m-icon",{attrs:{icon:"download",css:"border icon-button cursor-pointer text-2xl",title:"Import templates DB"},on:{click:function(e){return t.importDB()}}}),i("m-icon",{attrs:{icon:"health_and_safety",css:"border icon-button cursor-pointer text-2xl",title:"Backup templates"},on:{click:function(e){return t.$saveDB()}}}),i("div",{staticClass:"border-r h-10 w-1"})],1),i("button",{staticClass:"btn btn-blue border-0 rounded",attrs:{title:"Create a new template"},on:{click:function(e){return t.$dialogBus("startEmpty")}}},[t._v("New Template")]),i("div",{staticClass:"border-r h-10 w-1"}),i("div",{staticClass:"absolute right-0 mr-12 flex items-center"},[i("label",[t._v("Category")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.category,expression:"category"}],staticClass:"capitalize bg-white rounded",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.category=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"",selected:""}},[t._v("All")]),t._l(t.categories,(function(e){return i("option",{staticClass:"px-1 py-1",domProps:{value:e}},[t._v(t._s(e))])}))],2),i("label",[t._v("Search")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"mr-2",attrs:{type:"text"},domProps:{value:t.search},on:{keydown:function(e){return t.searchPages(e)},input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "+t._s(t.skip+1)+" - "+t._s(t.limit+t.skip<t.total?t.limit+t.skip:t.total)+" of "+t._s(t.total)+" ")])]),t.pages?i("ComponentsGallery",{attrs:{dbmode:!0,pages:t.pages,skip:t.skip,limit:t.limit},on:{skip:t.skipPage}}):t._e(),i("m-icon",{staticClass:"z-modal fixed mt-8 top-1/2 left-0 text-6xl",attrs:{icon:"chevron_left"},on:{click:function(e){t.skip>0&&(t.skip=t.skip-t.limit)}}}),i("m-icon",{staticClass:"z-modal fixed mt-8 top-1/2 right-0 text-6xl",attrs:{icon:"chevron_right"},on:{click:function(e){t.skip+t.limit<t.total&&(t.skip=t.skip+t.limit)}}})],1)},a=[],n=(i("d3b7"),i("3ca3"),i("ddb0"),i("4e82"),i("ac1f"),i("841c"),i("4de4"),{name:"TemplatesGallery",components:{ComponentsGallery:function(){return i.e("chunk-2d21a775").then(i.bind(null,"bc42"))}},data:function(){return{limit:10,skip:0,search:"",dataset:null,pages:null,total:0,preview:null,currentImage:null,category:"",filter:!1,galleryID:null}},computed:{categories:function(){return this.$store.state.editor.settings.categories.sort()}},watch:{category:function(t){var e=this;this.$store.dispatch("galleryFilter",t),this.skip=0,this.$getPages(this.category.toLowerCase(),this.limit,this.skip).then((function(t){e.pages=t}))},skip:function(t){var e=this;this.$getPages(this.category.toLowerCase(),this.limit,this.skip).then((function(t){e.pages=t}))}},methods:{skipPage:function(t){console.log(t),this.skip=t},getImageInfo:function(t){var e=this.$imageInfo(t),i=e.naturalWidth/e.naturalHeight;return i<1?"object-cover object-top h-60":i>2?"h-20 object-contain":"h-80 object-contain"},getPages:function(){var t=this;this.$getPages(this.category,this.limit,this.skip).then((function(e){t.pages=e}))},searchPages:function(t){var e=this;13===t.keyCode&&(this.search?this.$searchPages(this.search).then((function(t){e.pages=t,e.total=e.pages.length,e.filter=!0})):(this.skip=0,this.filter=!1,this.getPages()),this.kit=!1)},importDB:function(){var t=window.confirm("Importing will be overwrite the current database. Continue?");t&&dialogBus.$emit("importDatabase","common/ImportDatabase.vue")}},mounted:function(){var t=this;this.$dbCount().then((function(e){t.total=e})),this.$store.state.desktop.galleryFilter&&(this.category=this.$store.state.desktop.galleryFilter),this.$getPages(this.category,this.limit,this.skip).then((function(e){t.pages=e})),this.galleryID=this.$randomID()}}),r=n,o=i("2877"),l=Object(o["a"])(r,s,a,!1,null,null,null);e["default"]=l.exports}}]);